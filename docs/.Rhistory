tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05, title.size = 8)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05, title.size = 5)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05, title.size = 0.5)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05, legend.outside = TRUE)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_add_legend(type = "line", col = "gray30", labels = "Setores censitarios") +
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05, legend.outside = TRUE)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05, legend.outside = TRUE)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05, legend.outside = TRUE)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_fed_2018) + #tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05, legend.outside = TRUE)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05, legend.outside = TRUE)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "Finalidade")+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista - Federal", main.title.position = "center", outer.margins = 0.05, legend.outside = TRUE)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "Finalidade")+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista - Estadual", main.title.position = "center", outer.margins = 0.05, legend.outside = TRUE)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "grey40")+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista - Estadual", main.title.position = "center", outer.margins = 0.05, legend.outside = TRUE)
install.packages("rticles")
install.packages("pdflatex")
library(flexdashboards)
install.packages("flexdashboards")
install.packages("flexdashboard")
library(flexdashboard)
install.packages("leaflet")
library(leaflet)
library(flexdashboard)
#install.packages("leaflet")
library(leaflet)
m <- leaflet() %>%
addTiles() %>%  # Add default OpenStreetMap map tiles
addMarkers(lng=174.768, lat=-36.852, popup="The birthplace of R")
m <- leaflet() %>%
addTiles() %>%  # Add default OpenStreetMap map tiles
m <- leaflet() %>%
addTiles() %>%  # Add default OpenStreetMap map tiles
addMarkers(lng=174.768, lat=-36.852, popup="The birthplace of R")
m <- leaflet() %>%
addTiles() %>%  # Add default OpenStreetMap map tiles
addMarkers(lng=174.768, lat=-36.852, popup="The birthplace of R")
m
outline <- quakes[chull(quakes$long, quakes$lat),]
map <- leaflet(quakes) %>%
# Base groups
addTiles(group = "OSM (default)") %>%
addProviderTiles(providers$Stamen.Toner, group = "Toner") %>%
addProviderTiles(providers$Stamen.TonerLite, group = "Toner Lite") %>%
# Overlay groups
addCircles(~long, ~lat, ~10^mag/5, stroke = F, group = "Quakes") %>%
addPolygons(data = outline, lng = ~long, lat = ~lat,
fill = F, weight = 2, color = "#FFFFCC", group = "Outline") %>%
# Layers control
addLayersControl(
baseGroups = c("OSM (default)", "Toner", "Toner Lite"),
overlayGroups = c("Quakes", "Outline"),
options = layersControlOptions(collapsed = FALSE)
)
map
outline <- quakes[chull(quakes$long, quakes$lat),]
map <- leaflet(quakes) %>%
# Base groups
addTiles(group = "OSM (default)") %>%
addProviderTiles(providers$OpenStreetMap, group = "OpenStreetMap") %>%
addProviderTiles(providers$Stamen.TonerLite, group = "Toner Lite") %>%
# Overlay groups
addCircles(~long, ~lat, ~10^mag/5, stroke = F, group = "Quakes") %>%
addPolygons(data = outline, lng = ~long, lat = ~lat,
fill = F, weight = 2, color = "#FFFFCC", group = "Outline") %>%
# Layers control
addLayersControl(
baseGroups = c("OSM (default)", "Toner", "Toner Lite"),
overlayGroups = c("Quakes", "Outline"),
options = layersControlOptions(collapsed = FALSE)
)
map
outline <- quakes[chull(quakes$long, quakes$lat),]
map <- leaflet(quakes) %>%
# Base groups
addTiles(group = "OSM (default)") %>%
addProviderTiles(providers$OpenStreetMap, group = "OpenStreetMap") %>%
addProviderTiles(providers$Stamen.TonerLite, group = "Toner Lite") %>%
# Overlay groups
addCircles(~long, ~lat, ~10^mag/5, stroke = F, group = "Quakes") %>%
addPolygons(data = outline, lng = ~long, lat = ~lat,
fill = F, weight = 2, color = "#FFFFCC", group = "Outline") %>%
# Layers control
addLayersControl(
baseGroups = c("OSM (default)", "OpenStreetMap", "Toner Lite"),
overlayGroups = c("Quakes", "Outline"),
options = layersControlOptions(collapsed = FALSE)
)
map
outline <- quakes[chull(quakes$long, quakes$lat),]
map <- leaflet(quakes) %>%
# Base groups
addTiles(group = "OSM (default)") %>%
addProviderTiles(providers$NASAGIBS, group = "OpenStreetMap") %>%
addProviderTiles(providers$Stamen.TonerLite, group = "Toner Lite") %>%
# Overlay groups
addCircles(~long, ~lat, ~10^mag/5, stroke = F, group = "Quakes") %>%
addPolygons(data = outline, lng = ~long, lat = ~lat,
fill = F, weight = 2, color = "#FFFFCC", group = "Outline") %>%
# Layers control
addLayersControl(
baseGroups = c("OSM (default)", "OpenStreetMap", "Toner Lite"),
overlayGroups = c("Quakes", "Outline"),
options = layersControlOptions(collapsed = FALSE)
)
map
outline <- quakes[chull(quakes$long, quakes$lat),]
map <- leaflet(quakes) %>%
# Base groups
addTiles(group = "OSM (default)") %>%
addProviderTiles(providers$OpenStreetMap, group = "OpenStreetMap") %>%
addProviderTiles(providers$Stamen.TonerLite, group = "Toner Lite") %>%
# Overlay groups
addCircles(~long, ~lat, ~10^mag/5, stroke = F, group = "Quakes") %>%
addPolygons(data = outline, lng = ~long, lat = ~lat,
fill = F, weight = 2, color = "#FFFFCC", group = "Outline") %>%
# Layers control
addLayersControl(
baseGroups = c("OSM (default)", "OpenStreetMap", "Toner Lite"),
overlayGroups = c("Quakes", "Outline"),
options = layersControlOptions(collapsed = FALSE)
)
map
outline <- quakes[chull(quakes$long, quakes$lat),]
map <- leaflet(quakes) %>%
# Base groups
addTiles(group = "OSM (default)") %>%
addProviderTiles(providers$OpenStreetMap, group = "OpenStreetMap") %>%
addProviderTiles(providers$NASAGIBS.ModisTerraLSTDay, group = "Toner Lite") %>%
# Overlay groups
addCircles(~long, ~lat, ~10^mag/5, stroke = F, group = "Quakes") %>%
addPolygons(data = outline, lng = ~long, lat = ~lat,
fill = F, weight = 2, color = "#FFFFCC", group = "Outline") %>%
# Layers control
addLayersControl(
baseGroups = c("OSM (default)", "OpenStreetMap", "Toner Lite"),
overlayGroups = c("Quakes", "Outline"),
options = layersControlOptions(collapsed = FALSE)
)
map
outline <- quakes[chull(quakes$long, quakes$lat),]
map <- leaflet(quakes) %>%
# Base groups
addTiles(group = "OSM (default)") %>%
addProviderTiles(providers$OpenStreetMap, group = "OpenStreetMap") %>%
addProviderTiles(providers$OpenInfraMap, group = "Toner Lite") %>%
# Overlay groups
addCircles(~long, ~lat, ~10^mag/5, stroke = F, group = "Quakes") %>%
addPolygons(data = outline, lng = ~long, lat = ~lat,
fill = F, weight = 2, color = "#FFFFCC", group = "Outline") %>%
# Layers control
addLayersControl(
baseGroups = c("OSM (default)", "OpenStreetMap", "Toner Lite"),
overlayGroups = c("Quakes", "Outline"),
options = layersControlOptions(collapsed = FALSE)
)
map
outline <- quakes[chull(quakes$long, quakes$lat),]
map <- leaflet(quakes) %>%
# Base groups
addTiles(group = "OSM (default)") %>%
addProviderTiles(providers$OpenStreetMap, group = "OpenStreetMap") %>%
addProviderTiles(providers$MapBox, group = "Toner Lite") %>%
# Overlay groups
addCircles(~long, ~lat, ~10^mag/5, stroke = F, group = "Quakes") %>%
addPolygons(data = outline, lng = ~long, lat = ~lat,
fill = F, weight = 2, color = "#FFFFCC", group = "Outline") %>%
# Layers control
addLayersControl(
baseGroups = c("OSM (default)", "OpenStreetMap", "Toner Lite"),
overlayGroups = c("Quakes", "Outline"),
options = layersControlOptions(collapsed = FALSE)
)
map
library(tmap)
tmap_mode("view")
tm_shape(setores_abc_censo) +
tm_fill(col = "Renda", style = "quantile", popup.vars = c("Pessoas", "Renda")) +
tm_scale_bar()
knitr::opts_chunk$set(echo = TRUE)
# install.packages("rgdal")
library(rgdal)
# install.packages("sf")
library(sf)
# install.packages("tmap")
library(tmap)
outorgas_ANA_estadual_2016 <- read_sf("data/vetor/Outorgas-UF-ESTA-SP-2016-1/Outorgas UF ESTA SP 2016.shp")
outorgas_ANA_federal_2018 <- read_sf("data/vetor/Outorgas-ANA-EST-SP-2018-1/Outorgas ANA EST SP 2018.shp")
st_crs(outorgas_ANA_estadual_2016)
plot(Latitude ~Longitude, data=outorgas_ANA_estadual_2016)
st_crs(outorgas_ANA_federal_2018)
plot(Latitude ~Longitude, data=outorgas_ANA_federal_2018)
EPSG <- make_EPSG()
#sirgas2000 <- as.character(subset(EPSG, code==4674))
outorgas_ANA_estadual_2016_sf <- st_as_sf(outorgas_ANA_estadual_2016, coords = c("Longitude", "Latitude"), crs = 4674)
st_crs(outorgas_ANA_estadual_2016_sf)<-4674
st_crs(outorgas_ANA_estadual_2016_sf)
plot(Latitude ~Longitude, data=outorgas_ANA_estadual_2016_sf)
outorgas_ANA_federal_2018_sf <- st_as_sf(outorgas_ANA_federal_2018, coords = c("Longitude", "Latitude"), crs = 4674)
st_crs(outorgas_ANA_federal_2018_sf)<-4674
st_crs(outorgas_ANA_federal_2018_sf)
plot(Latitude ~Longitude, data=outorgas_ANA_federal_2018_sf)
MMP_Emplasa <- read_sf("data/vetor/LimiteMacrometropole2015/LimiteMacrometropole2015Polygon.shp")
st_crs(MMP_Emplasa)
st_crs(outorgas_ANA_federal_2018_sf)<-4674
plot(st_geometry(MMP_Emplasa))
outorgas_MMP_fed_2018 <- outorgas_ANA_federal_2018_sf[MMP_Emplasa, ]
outorgas_MMP_est_2016 <- outorgas_ANA_estadual_2016_sf[MMP_Emplasa, ]
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05, legend.outside = TRUE)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05, legend.outside = TRUE)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05)
# install.packages("rgdal")
library(rgdal)
# install.packages("sf")
library(sf)
# install.packages("tmap")
library(tmap)
outorgas_ANA_estadual_2016 <- read_sf("data/vetor/Outorgas-UF-ESTA-SP-2016-1/Outorgas UF ESTA SP 2016.shp")
outorgas_ANA_federal_2018 <- read_sf("data/vetor/Outorgas-ANA-EST-SP-2018-1/Outorgas ANA EST SP 2018.shp")
st_crs(outorgas_ANA_estadual_2016)
plot(Latitude ~Longitude, data=outorgas_ANA_estadual_2016)
st_crs(outorgas_ANA_federal_2018)
plot(Latitude ~Longitude, data=outorgas_ANA_federal_2018)
st_crs(outorgas_ANA_estadual_2016)
plot(Latitude ~Longitude, data=outorgas_ANA_estadual_2016)
st_crs(outorgas_ANA_federal_2018)
plot(Latitude ~Longitude, data=outorgas_ANA_federal_2018)
EPSG <- make_EPSG()
#sirgas2000 <- as.character(subset(EPSG, code==4674))
outorgas_ANA_estadual_2016_sf <- st_as_sf(outorgas_ANA_estadual_2016, coords = c("Longitude", "Latitude"), crs = 4674)
st_crs(outorgas_ANA_estadual_2016_sf)<-4674
st_crs(outorgas_ANA_estadual_2016_sf)
plot(Latitude ~Longitude, data=outorgas_ANA_estadual_2016_sf)
outorgas_ANA_federal_2018_sf <- st_as_sf(outorgas_ANA_federal_2018, coords = c("Longitude", "Latitude"), crs = 4674)
st_crs(outorgas_ANA_federal_2018_sf)<-4674
st_crs(outorgas_ANA_federal_2018_sf)
plot(Latitude ~Longitude, data=outorgas_ANA_federal_2018_sf)
MMP_Emplasa <- read_sf("data/vetor/LimiteMacrometropole2015/LimiteMacrometropole2015Polygon.shp")
st_crs(MMP_Emplasa)
st_crs(outorgas_ANA_federal_2018_sf)<-4674
plot(st_geometry(MMP_Emplasa))
outorgas_MMP_fed_2018 <- outorgas_ANA_federal_2018_sf[MMP_Emplasa, ]
outorgas_MMP_est_2016 <- outorgas_ANA_estadual_2016_sf[MMP_Emplasa, ]
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "blue")+
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "red" )+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista", main.title.position = "center", outer.margins = 0.05)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "Finalidade")+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista - Federal", main.title.position = "center", outer.margins = 0.05, legend.outside = TRUE)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "Finalidade")+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista - Federal", main.title.position = "center", outer.margins = 0.05)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_fed_2018) + tm_bubbles(size = "m3_s", col = "Finalidade")+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista - Federal", main.title.position = "center", outer.margins = 0.1, legend.outside = TRUE)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "grey40")+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista - Estadual", main.title.position = "center", outer.margins = 0.05, legend.outside = TRUE)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "grey40")+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom"))
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "grey40")+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top"))
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "grey40")+
tm_scale_bar(position = c("right","top"))
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_est_2016)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "grey40")+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista - Estadual", main.title.position = "center", outer.margins = 1, legend.outside = TRUE)
tm_shape(MMP_Emplasa) + tm_polygons()+
tm_grid(alpha = 0.2, labels.rot = c(0,90), labels.inside.frame = FALSE) +
tm_add_legend(type = "line", col = "gray30", labels = "Macrometrópole Paulista") +
tm_shape(outorgas_MMP_est_2016) + tm_bubbles(size = "m3_s", col = "grey40")+
tm_scale_bar(position = c("right","top")) +
tm_compass(position = c("left","top")) +
tm_credits(" Projecao SIRGAS 2000 \n Fonte: DATAGEO, SEADE", position = c("right","bottom")) +
tm_layout(main.title = "Outorgas de Recursos Hídricos \n na Macrometrópole Paulista - Estadual", main.title.position = "center", outer.margins = NA, legend.outside = TRUE)
outline <- quakes[chull(quakes$long, quakes$lat),]
map <- leaflet() %>%
# Base groups
addTiles(group = "OSM (default)") %>%
addProviderTiles(providers$OpenStreetMap, group = "OpenStreetMap") %>%
addProviderTiles(providers$MapBox, group = "Toner Lite") %>%
# Overlay groups
addCircles(~long, ~lat, ~10^mag/5, stroke = F, group = "Quakes") %>%
addPolygons(data = outline, lng = ~long, lat = ~lat,
fill = F, weight = 2, color = "#FFFFCC", group = "Outline") %>%
# Layers control
addLayersControl(
baseGroups = c("OSM (default)", "OpenStreetMap", "Toner Lite"),
overlayGroups = c("Quakes", "Outline"),
options = layersControlOptions(collapsed = FALSE)
)
outline <- quakes[chull(quakes$long, quakes$lat),]
map <- leaflet() %>%
# Base groups
addTiles(group = "OSM (default)") %>%
addProviderTiles(providers$OpenStreetMap, group = "OpenStreetMap") %>%
addProviderTiles(providers$MapBox, group = "Toner Lite") %>%
# Overlay groups
addCircles(~long, ~lat, ~10^mag/5, stroke = F, group = "Quakes") %>%
addPolygons(data = outline, lng = ~long, lat = ~lat,
fill = F, weight = 2, color = "#FFFFCC", group = "Outline") %>%
# Layers control
addLayersControl(
baseGroups = c("OSM (default)", "OpenStreetMap", "Toner Lite"),
overlayGroups = c("Quakes", "Outline"),
options = layersControlOptions(collapsed = FALSE)
)
